{% extends "master.html.twig"%}
{% block title %}Registration
{% endblock %}

{% block head %}
{% include 'address-js.html.twig' with {apiKey, addressType: "address"} %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
        $(document).ready(function () {
            $('input[name=email]').keyup(function() {
                var newemail = $(this).val();
                newemail e= encodeURIComponent(newemail);
                $("#emailIsTaken").load('/isemailtaken/{{newemail}}' + newemail);
            });
        });
    </script>
{% endblock %}

{% block content %}

{% if errorList %}
	<ul>
		{% for error in errorList %}
			<li>{{error}}
			{% endfor %}
		</ul>
	{% endif %}


	<form class="" method="post" enctype="multipart/form-data">
		<h1>Registration</h1>
        Name:<br>
		<input type="text" name="name" value="{{v.name}}"><br>
		User Name:<br>
		<input type="text" name="userName" value="{{v.userName}}"><br>
		Email:<br>
		<input type="text" name="email" value="{{v.email}}"><br>
		<span id="emailIsTaken" class="errorMessage"></span><br>
		Password:
		<br><input type="password" name="pass1" value="{{v.pass1}}"><br>
		Password (repeated):<br><input type="password" name="pass2" value="{{v.pass2}}"><br><br>
        {% include "address-form.html.twig" with {
			address: v.street, 
			appartmentNo: v.appartmentNo, 
			postalCode: v.postalCode, 
			city: v.city, 
			province: v.province
			} %}
        Business Owner:
        <select required name="accountType">
            <option value="" disabled selected hidden> Choose an option</option>  
            <option name="accountType" value="customer"{% if accountType == 'customer' %} selected="selected"{% endif %}>NO</option>
            <option name="accountType" value="business"{% if accountType == 'business' %} selected="selected"{% endif %}>YES</option> 
        </select>
	<label for="phone">Phone:
	</label><br>
	<input type="text" name = "phone" value="{{v.phone}}"><br>
	<input class="center btn brand z-depth-0" type="submit" name="next" value="Continue">
</form>
{% endblock content%}
