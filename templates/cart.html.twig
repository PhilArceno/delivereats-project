{% extends "master.html.twig" %}
{% block title %}Cart
{% endblock %}

{% block addHead %}
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
 <script>
	$(document).ajaxError(function () {
	alert("AJAX error");
	});
	
	$(document).ready(function () {
	refreshList();
	
	function refreshList() {
	$.ajax({url: '/api/cart',
	type: 'GET',
	dataType: 'json'}
	).done(function (list) {
	var tbody = '<tr><th>Img</th><th>Name</th><th>Description</th><th>Quantity</th><th>Price</th></tr>';
	for (var i = 0; i < list.length; i++) {
	var item = list[i];
	tbody += '<tr onclick="selectItem(' + item.name + ')">';
	tbody += '<td><img style="object-fit: scale-down;" width=100 height=100 src="' + item.imageFilePath + '"/></td>';
	tbody += '<td>' + item.name + '</td>';
	tbody += '<td>' + item.description + '</td>';
	tbody += '<td>' + item.quantity + '</td>';
	tbody += '<td>' + item.price + '</td>';
	tbody += '</tr>';
	}
	$("#cartItems").html(tbody);
	});
	}
	});
 </script>
{% endblock %}
	
{% block content %}
	<div class="container">
	   <h2>Shopping Cart</h2>
	  <div class="container mt-3">
	    <table id="cartItems"></table>
	   </div>
	   <div class="container mt-3">
	      <a class="btn btn-primary" href="/order" role="button">Place order</a>
	    </div>
	</div>
{% endblock %}
